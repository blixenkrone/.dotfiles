exports.default=function(e){var r={};function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(n,i,function(r){return e[r]}.bind(null,i));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toggleCheckbox=r.getItemsAt=r.TextItemType=r.clickAt=r.getClickCoord=r.getMatchAt=r.isCheckbox=r.isLink=void 0;const n=t(1);function i(e,r,t){let n=null;if(r.lastIndex=0,!r.global)return console.error("getMatchAt requires a global regex; Consider adding a `g` after ${regex}"),null;do{if(n=r.exec(e),!n)break;const i=n.index,o=i+n[0].length;if(i<=t&&t<=o)return n}while(n);return null}var o;function g(e,r){let{line:t,ch:o}=r;const g=e.getLine(t),c=i(g,n.link_regex,o);let l="";if(c)for(let e=1;e<=4;e++)l=l||c[e];else{const r=i(g,n.link_reference_regex,o);if(!r)return;const t=r[1]||r[2];if(""===t.trim()||"x"===t.toLowerCase())return;const c=new RegExp(`\\[${t}\\]:\\s([^\\n]+)`,"g");for(let r=0;r<e.lineCount();r++){const t=i(e.getLine(r),c,4);if(t){l=t[1];break}}if(""===l)return void alert(`No link defintion for [${t}]. Press Esc to dismiss.`)}return l&&l.endsWith(")")?i(g,n.image_regex,o)&&(l=l.slice(0,l.length-1)):l&&(l.endsWith('"')||l.endsWith("'"))&&(l=l.slice(0,l.length-1)),l=l.split(" ")[0],l}function c(e,r){const{line:t,ch:o}=r,g=e.getLine(t),c=i(g,n.checkbox_regex,o);return c&&c[3]?{match:c,lineText:g,line:t}:null}function l(e,r,t){const n=e.getCursor(),i=c(e,r);if(!i)return!1;const{match:o,line:g,lineText:l}=i;let s=l.indexOf(o[3]),x=s+o[3].length,_=t;return""===_&&(_=" "===o[3][1]?"[x]":"[ ]"),e.replaceRange(_,{ch:s,line:g},{ch:x,line:g},"+input"),e.setCursor(n,null,{scroll:!1}),!0}function s(e,r,t){if(!e.somethingSelected())return l(e,r,t);for(let r of e.listSelections()){let n,i;r.anchor.line>r.head.line?(n=r.head,i=r.anchor):(n=r.anchor,i=r.head);for(let r=n.line;r<=i.line;r++)l(e,{line:r,ch:0},t)}return!0}r.isLink=function(e){if(!e.target)return!1;const r=e.target;return r.matches(".cm-rm-link *, .cm-rm-link")||r.matches(".cm-rm-link-label")},r.isCheckbox=function(e){return!!e.target&&e.target.matches(".cm-rm-checkbox *, .cm-rm-checkbox")},r.getMatchAt=i,r.getClickCoord=function(e,r){return(t=e.coordsChar({left:r.clientX,top:r.clientY})).sticky&&"before"===t.sticky?{ch:t.ch-1,line:t.line}:t;var t},r.clickAt=function(e,r){if(!e.state.richMarkdown)return;const t=e.state.richMarkdown.settings;if(t.links){const t=g(e,r);if(t)return{name:"followLink",url:t}}return t.checkbox&&s(e,r,""),null},function(e){e.Link="link",e.Checkbox="checkbox"}(o=r.TextItemType||(r.TextItemType={})),r.getItemsAt=function(e,r){if(!e.state.richMarkdown)return null;const t=e.state.richMarkdown.settings;let n=[];if(t.links){const t=g(e,r);t&&n.push({type:o.Link,url:t,coord:r})}if(t.checkbox){c(e,r)&&n.push({type:o.Checkbox,coord:r})}return n},r.toggleCheckbox=s},function(e,r,t){"use strict";function n(e,r,t){const n=e.indexOf("tick")>0;return{name:"RichMarkdownOverlay-"+e,requiredSettings:t,token:function(t){const i=function(e,r){return e.lastIndex=r.pos,e.exec(r.string)}(r,t),o=t.baseToken();if((null==o?void 0:o.type)&&(!n&&(o.type.includes("jn-inline-code")||o.type.includes("comment"))||o.type.includes("katex")))t.pos+=o.size;else{if(i&&i.index===t.pos)return t.pos+=i[0].length||1,e;i?t.pos=i.index:t.skipToEnd()}return null}}}function i(e,r){for(let t of r)if(!e[t]&&("extraCSS"!==t||"none"===e.theme&&!e.extraFancy))return!1;return!0}Object.defineProperty(r,"__esModule",{value:!0}),r.remove=r.add=r.overlays=r.regexOverlay=r.table_regex=r.blockquote_regex=r.hr_regex=r.list_token_regex=r.header_regex=r.admonition_line_regex=r.admonition_token_regex=r.backtick_block_token_regex=r.backtick_token_regex=r.strike_token_regex=r.sup_token_regex=r.sub_token_regex=r.insert_token_regex=r.highlight_token_regex=r.strong_underline_regex=r.strong_star_regex=r.emph_underline_regex=r.emph_star_regex=r.sup_regex=r.sub_regex=r.insert_regex=r.highlight_regex=r.html_image_regex=r.image_regex=r.link_label_regex=r.link_reference_regex=r.link_regex=r.checkbox_inner_checked_regex=r.checkbox_inner_regex=r.checkboxed_regex=r.checkbox_regex=void 0,r.checkbox_regex=/^(\s*)((?:[\*\+\-\#]|[\#]+) )(\[[Xx ]\])\s.*$/g,r.checkboxed_regex=/^(\s*)((?:[\*\+\-\#]|[\#]+) )(\[[Xx]\])\s.*$/g,r.checkbox_inner_regex=/(?<=\[)[Xx ](?=\])/g,r.checkbox_inner_checked_regex=/(?<=\[)[Xx](?=\])/g,r.link_regex=/(?<![\\])\[[^\]]*\]\(([^\(\)]+)\)|<([^>\s]+\.[^>\s]+)>|((?:[a-zA-Z0-9\+\.\-])+:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|(?:[a-zA-Z0-9\+\.\-])+:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,}[^\)])(?<!\))|joplin:\/\/x-callback-url\/.*/g,r.link_reference_regex=/(?<![\\])\[([^\]]*)\](?!\()|\]\[([^\]]*)\]\s/g,r.link_label_regex=/((?<![\\])\[(?:[^\sxX]|(?:[^\]][^\]]+))\])/g,r.image_regex=/!\[[^\]]*\]\([^\(]+\)/g,r.html_image_regex=/<img([^>]+?)\/?>/g,r.highlight_regex=/(?<!\\)==(?=[^\s])[^=]*[^=\s\\]==/g,r.insert_regex=/(?<!\\)\+\+(?=[^\s])[^\+]*[^\+\s\\]\+\+/g,r.sub_regex=/(?<![\\~])~(?=[^\s])[^~]*[^~\s\\]~/g,r.sup_regex=/(?<![\\[])\^(?=[^\s])[^\^]*[^\^\s\\[]\^/g,r.emph_star_regex=/(?<![\\\*])\*(?!\*)/g,r.emph_underline_regex=/(?<![\\\_])\_(?!\_)/g,r.strong_star_regex=/(?<![\\\*])\*\*(?!\*)/g,r.strong_underline_regex=/(?<![\\\_])\_\_(?!\_)/g,r.highlight_token_regex=/(?<![\\=])==(?!=)/g,r.insert_token_regex=/(?<![\\\+])\+\+(?!\+)/g,r.sub_token_regex=/(?<![\\~])~(?!~)/g,r.sup_token_regex=/(?<![\\\^])\^(?!\^)/g,r.strike_token_regex=/(?<![\\~])~~(?!~~)/g,r.backtick_token_regex=/(?<![\\`])`(?!`)/g,r.backtick_block_token_regex=/^```\S*$/g,r.admonition_token_regex=/^!!!/g,r.admonition_line_regex=/^!!!.*$/g,r.header_regex=/^\s*#+\s/g,r.list_token_regex=/^(\s*)([*+-] \[[Xx ]\]\s|[*+->]\s|(\d+)([.)]\s))(\s*)/g,r.hr_regex=/^([*\-_])(?:\s*\1){2,}\s*$/,r.blockquote_regex=/^\s*\>+\s/g,r.table_regex=/^\|[^\n]+\|/g,r.regexOverlay=n,r.overlays=[n("rm-checkbox",r.checkbox_regex,[]),n("rm-checkboxed",r.checkboxed_regex,["extraCSS"]),n("rm-checkbox-check",r.checkbox_inner_regex,["extraCSS"]),n("rm-checkbox-checked",r.checkbox_inner_checked_regex,["extraCSS"]),n("rm-link",r.link_regex,[]),n("rm-link-label",r.link_label_regex,[]),n("rm-image",r.image_regex,[]),n("rm-image",r.html_image_regex,[]),n("rm-list-token",r.list_token_regex,[]),n("rm-ins",r.insert_regex,["insertHighlight"]),n("rm-sub",r.sub_regex,["subHighlight"]),n("rm-sup",r.sup_regex,["supHighlight"]),n("rm-header-token",r.header_regex,["extraCSS"]),n("line-cm-rm-blockquote",r.blockquote_regex,["extraCSS"]),n("rm-em-token",r.emph_star_regex,["extraCSS"]),n("rm-em-token",r.emph_underline_regex,["extraCSS"]),n("rm-strong-token",r.strong_star_regex,["extraCSS"]),n("rm-strong-token",r.strong_underline_regex,["extraCSS"]),n("rm-highlight",r.highlight_regex,["markHighlight"]),n("rm-highlight-token",r.highlight_token_regex,["extraCSS","markHighlight"]),n("rm-ins-token",r.insert_token_regex,["extraCSS","insertHighlight"]),n("rm-sub-token",r.sub_token_regex,["extraCSS","subHighlight"]),n("rm-sup-token",r.sup_token_regex,["extraCSS","supHighlight"]),n("rm-strike-token",r.strike_token_regex,["extraCSS"]),n("rm-backtick-token",r.backtick_token_regex,["extraCSS"]),n("rm-triptick-token",r.backtick_block_token_regex,["extraCSS"]),n("rm-hr line-cm-rm-hr",r.hr_regex,["extraCSS"]),n("rm-admonition-token line-cm-rm-admonition line-background-cm-rm-admonition",r.admonition_token_regex,["extraCSS"]),n("rm-admonition",r.admonition_line_regex,["extraCSS"])],r.add=function(e){if(e.state.richMarkdown)for(let t of r.overlays)i(e.state.richMarkdown.settings,t.requiredSettings)&&e.addOverlay(t)},r.remove=function(e){for(let t of r.overlays)e.removeOverlay(t)}}]).default;